---
title: "be - Initilialise GitLab CI"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{be-initilialise-gitlab-ci}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(lozen)
```

<!-- WARNING - This vignette is generated by {fusen} from dev/flat_init_gitlab_ci.Rmd: do not edit by hand -->

## `use_gitlab_ci()`: Set gitlab continuous integration

```{r examples-use_gitlab_ci, eval = FALSE}
withr::with_tempdir({
  use_gitlab_ci(image = "r-base")
})

withr::with_tempdir({
  use_gitlab_ci(
    image = "rocker/verse",
    repo_name = "https://packagemanager.rstudio.com/all/__linux__/focal/latest",
    type = "check-coverage-pkgdown"
  )
})
```

  

## `read_ci()`: Import yaml CI files as list 

Handlers will convert all parameters as list.
    

  

```{r example-read_ci}
yaml_path <- system.file("yaml", ".gitlab-ci-shiny.yml", package = "lozen")
ci_list <- read_ci(path = yaml_path)
```

  

## `combine_ci()` : Merge two yaml as a list into a combined list

    

  

```{r example-combine_ci}
# pkgdown yml
full <- yaml::read_yaml(file = system.file("yaml", ".gitlab-ci-pkg.yml", package = "lozen"))

# shiny yaml
connect <- yaml::read_yaml(file = system.file("yaml", ".gitlab-ci-shiny.yml", package = "lozen"))

ci_list <- combine_ci(ci1 = full, ci2 = connect)
```

  

## `clean_image()` : select image in CI info

This function will keep a single docker image from the CI parameters if multiple are in the list. It will keep the image from the initial CI file.


  

```{r example-clean_image}
# pkgdown yml
full <- yaml::read_yaml(file = system.file("yaml", ".gitlab-ci-pkg.yml", package = "lozen"))

# shiny yaml
connect <- yaml::read_yaml(file = system.file("yaml", ".gitlab-ci-shiny.yml", package = "lozen"))

ci_list <- combine_ci(ci1 = full, ci2 = connect)
ci_list <- clean_image(ci_list)
```

  

  




# check_if_yaml_exists

    

  

```{r example-check_if_yaml_exists}
# check_if_yaml_exists()
```

  

# create_deploy_ci_stage

    

  

```{r example-create_deploy_ci_stage}
create_deploy_ci_stage(
  image = "rocker/verse",
  deploy_function = "deploy_connect_shiny"
)
```

  

  

# amend_yaml

    

  

```{r example-amend_yaml}
# amend_yaml()
```

  

  

# Inflate  

  
  


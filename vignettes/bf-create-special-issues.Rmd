---
title: "bf - Create special issues"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{bf-create-special-issues}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(lozen)
```

<!-- WARNING - This vignette is generated by {fusen} from dev/flat_create_special_issues.Rmd: do not edit by hand -->

# Configure gitlab connection

The first step is to configure the connection to the gitlab. Make sure the environment variable GITLAB_TOKEN exists.


```{r eval = FALSE}
library(gitlabr)

gitlab_url <- "https://gitlab.com/"

# create gitlab connection
private_token <- Sys.getenv("GITLAB_TOKEN")

my_gitlab <- gl_connection(
  gitlab_url = gitlab_url,
  private_token = private_token
)

# Set the connection for the session
set_gitlab_connection(gitlab_con = my_gitlab)

# Create a project
project_id <- create_group_project(
  "examplesissues",
  namespace_id = NULL
)
```

# `add_issue_clients()`: create the welcome issue for client side (gitlab)

The function `add_issue_clients()` creates an issue targeted to the client summarizing the main steps of the project follow-up (project hosted on gitlab).
Please note that testing this function up to gitlab issue creation using {gitlabr}, you must set the environment variable `ALLOW_PUBLISHING_ON_GITLAB` to `TRUE`.


```{r example-add_issue_clients, eval = FALSE}
#' \dontrun{
add_issue_clients(
  project_id = "<get_your_id_project>",
  project_name = "<get_your_project_name>",
  group_url = "<group_url_repo>" # should looks like "https://gitlab.com/cervan.girard/"
)
#' }
```

## Subfunction: `create_issue_content_clients()`

This function will generate the text needed to make the first project issue aimed at guiding the client through the board.


```{r example-create_issue_content_clients, eval = FALSE}
#' \dontrun{
create_issue_content_clients(
  project_name = "<get_your_project_name>",
  group_url = "<group_url_repo>" # should looks like "https://gitlab.com/cervan.girard/"
)
#' }
```

# `add_issue_dev()`: create the to-do issue for dev side (gitlab)

The function `add_issue_dev()` creates an issue targeted to the dev team summarizing the main steps of the project initiation (project hosted on gitlab).
Please note that testing this function up to gitlab issue creation using {gitlabr}, you must set the environment variable `ALLOW_PUBLISHING_ON_GITLAB` to `TRUE`.


```{r example-add_issue_dev, eval = FALSE}
# exemple nécessite des opérations sur gitlab : à voir
#' \dontrun{
add_issue_dev(
  project_id = "<get_your_id_project>",
  project_name = "<get_your_project_name>",
  group_url = "<group_url_repo>" # should looks like "https://gitlab.com/cervan.girard/"
)
#' }
```

## Subfunction: `create_issue_content_dev()`

This function will generate the text needed to make the first project issue aimed at guiding the developers through the project initiation.


```{r example-create_issue_content_dev, eval = FALSE}
#' \dontrun{
create_issue_content_dev(
  project_id = "<get_your_id_project>",
  project_name = "<get_your_project_name>",
  group_url = "<group_url_repo>" # should looks like "https://gitlab.com/cervan.girard/"
)
#' }
```

# `add_issue_kickoff()`

This function will add a new issue on GitLab with the information for the kickoff meeting.


```{r example-add_issue_kickoff, eval = FALSE}
#' \dontrun{
add_issue_kickoff(project_id = "<get_your_id_project>")
#' }
```

## Subfunction: `create_issue_content_kickoff()`

This function fetch the content of the kickoff issue from a markdown file and adjust parameter for the `create_weekly()` run.


```{r example-create_issue_content_kickoff}
create_issue_content_kickoff()
```

# `add_issue_clients_github()`: create the welcome issue for client side (github)

This function will create a welcome issue for clients on github if not present and open already. If not, it will create it or reopen it and update the text content.
Please note that testing this function up to github issue creation using {gh}, you must set the environment variable `ALLOW_PUBLISHING_ON_GITHUB` to `TRUE`.


```{r example-add_issue_clients_github, eval = FALSE}
#' \dontrun{
add_issue_clients_github(
  owner = "owner",
  repo = "repo"
)
#' }
```

## Subfunction: `create_issue_content_clients_github()`

This function will generate the text needed to make the first project issue aimed at guiding the client through the board on github.


```{r example-create_issue_content_clients_github, eval = FALSE}
#' \dontrun{
create_issue_content_clients_github(
  owner = "owner",
  repo = "repo"
)
#' }
```

# `add_issue_dev_github()`: create the to-do issue for dev (github)

This function will create a to-do issue for dev on github if not present and open already. If not, it will create it or reopen it and update the text content.
Please note that testing this function up to github issue creation using {gh}, you must set the environment variable `ALLOW_PUBLISHING_ON_GITHUB` to `TRUE`.


```{r example-add_issue_dev_github, eval = FALSE}
#' \dontrun{
add_issue_dev_github(
  owner = "owner",
  repo = "repo"
)
#' }
```

## Subfunction: `create_issue_content_dev_github()`

```{r example-create_issue_content_dev_github, eval = FALSE}
#' \dontrun{
create_issue_content_dev_github(
  owner = "owner",
  repo = "repo"
)
#' }
```

# `add_issue_kickoff_github()`

This function will add a new issue to GitHub to be completed and validated during the kickoff. Note that after closing this issue with the client, you should produce a weekly.


```{r example-add_issue_kickoff_github, eval = FALSE}
#' \dontrun{
add_issue_kickoff_github(
  owner = "owner",
  repo = "repo"
)
#' }
```

# Define templates (normal issues, delivery issues)

## `gl_add_template_issue()`: create the template for standard issue on gitlab

The function `gl_add_template_issue()` adds a template in gitlab for all the issues. This template follows the standards of ThinkR. You can choose the language (fr/en) and the verbosity (light/full).


```{r example-gl_add_template_issue}
# Try with a temp project
## Create temp dir and file
project_path <- tempfile("myproject")
dir.create(project_path)

## Add the template in full french
gl_add_template_issue(project_path, language = "fr", type = "full")

## Add the template in full english
gl_add_template_issue(project_path, language = "en", type = "full")

## Add the template in light french
gl_add_template_issue(project_path, language = "fr", type = "light")

## Add the template in light english
gl_add_template_issue(project_path, language = "en", type = "light")

# Suppress tmp folder
unlink(project_path, recursive = TRUE)
```

## `gh_add_template_issue()`: create the template for standard issue on github

The function `gh_add_template_issue()` adds a template in github for all the issues. This template follows the standards of ThinkR. You can choose the language (fr/en) and the verbosity (light/full).


```{r example-gh_add_template_issue}
# Try with a temp project
## Create temp dir and file
project_path <- tempfile("myproject")
dir.create(project_path)

## Add the full template in french
gh_add_template_issue(project_path, language = "fr", type = "full")

## Add the full template in english
gh_add_template_issue(project_path, language = "en", type = "full")

## Add the light template in french
gh_add_template_issue(project_path, language = "fr", type = "light")

## Add the light template in english
gh_add_template_issue(project_path, language = "en", type = "light")

# suppress tmp folder
unlink(project_path, recursive = TRUE)
```


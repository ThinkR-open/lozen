---
title: "cb - Testthat tools"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{cb-testthat-tools}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(lozen)
```

<!-- WARNING - This vignette is generated by {fusen} from /dev/flat_helper_testthat.Rmd: do not edit by hand -->

# Test gitlab CI workflows

This functions `with_gitlab_project()` allows its users to launch an
expression to initiate a given gitlab ci workflow within a dummy project on a gitlab instance.


```{r example-with_gitlab_project, eval = FALSE}
#' \dontrun{
output <- with_gitlab_project(
  gitlab_url = Sys.getenv("GITLAB_URL", unset = "https://gitlab.com"),
  namespace_id = NULL,
  project_name = "lozen.test.project",
  exp = {
    bookdown::create_bs4_book(path = ".")
    bookdown::render_book()
    lozen::use_gitlab_ci(
      type = "bookdown"
    )
  }
)
output
#' }
```

## Subfunction : `fetch_connect()`

This function will be triggered during a call to `with_gitlab_project()` to check whether the app has been correctly deployed on connect.

It requires an API key to Connect. It will return the HTTP status code and the guid of the app that will be used to delete the app on function exit.


  

```{r example-fetch_connect, eval = FALSE}
#' \dontrun{
fetch_connect(app_name = "my_app_name")
#' }
```

  

